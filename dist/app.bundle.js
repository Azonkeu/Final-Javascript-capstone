(()=>{"use strict";var n={426:(n,e,r)=>{r.d(e,{Z:()=>c});var t=r(81),o=r.n(t),a=r(645),i=r.n(a)()(o());i.push([n.id,"@import url(https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400&display=swap);"]),i.push([n.id,'*,\r\n*::after,\r\n*::before {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font-family: "Roboto", "Ubuntu", sans-serif;\r\n  margin: 0;\r\n  background-color: #180c34;\r\n}\r\n\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n  display: flex;\r\n}\r\n\r\nheader {\r\n  padding: 1rem 1rem 0.5rem 0;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  height: 3em;\r\n  background-color: #dbc7ea;\r\n}\r\n\r\n.link {\r\n  margin-right: 2%;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  font-size: 1em;\r\n}\r\n\r\n.movie-logo {\r\n  margin-left: 2%;\r\n  font-size: 1.2em;\r\n  color: #18208d;\r\n}\r\n\r\n.line:hover {\r\n  text-decoration: underline;\r\n  color: #f08aa7;\r\n}\r\n\r\n.logo {\r\n  margin-left: 3%;\r\n}\r\n\r\n.main {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 2% 2% 2% 2%;\r\n}\r\n\r\n.movie-block {\r\n  display: grid;\r\n  grid-template-columns: 23% 23% 23% 23%;\r\n  gap: 2%;\r\n  margin-top: 5%;\r\n}\r\n\r\n.cards {\r\n  width: 100%;\r\n  border-radius: 3px;\r\n  box-shadow: 0.2px 4px 5px rgba(0, 0, 0, 0.1);\r\n  padding: 2% 2% 2% 2%;\r\n  background-color: #c39fcc;\r\n}\r\n\r\n.cards img {\r\n  display: block;\r\n  height: 23rem;\r\n  width: 100%;\r\n}\r\n\r\n.title-div {\r\n  display: flex;\r\n  flex-direction: row;\r\n  color: blue;\r\n  margin-top: 1%;\r\n}\r\n\r\n.title {\r\n  flex: 3;\r\n  color: blue;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 0.5rem 0 0.5rem;\r\n  letter-spacing: 0.5px;\r\n  height: 7rem;\r\n  min-width: 70%;\r\n}\r\n\r\n.btn {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 3%;\r\n}\r\n\r\n.comment-btn {\r\n  flex: 1;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  max-width: 80%;\r\n  padding: 2% 27% 2% 27%;\r\n  margin-bottom: 2%;\r\n  border-radius: 5px;\r\n  border: 2px solid #5959c7;\r\n  background-color: #5959c7;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #fff;\r\n  cursor: pointer;\r\n}\r\n\r\n.reservation-btn {\r\n  flex: 1;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  max-width: 80%;\r\n  padding: 2% 25% 2% 25%;\r\n  border-radius: 5px;\r\n  border: 2px solid #dbdf14;\r\n  background-color: #dbdf14;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.fas {\r\n  color: #56109b;\r\n  padding-top: 0.45rem;\r\n}\r\n\r\n.fas:hover {\r\n  color: #180c34;\r\n}\r\n\r\n.popup-block {\r\n  display: flex;\r\n  width: 100%;\r\n  background-color: rgba(14, 3, 3, 0.1);\r\n}\r\n\r\n.r-popup {\r\n  display: flex;\r\n  width: 100%;\r\n  background-color: rgba(14, 3, 3, 0.1);\r\n}\r\n\r\n.pop-div {\r\n  position: fixed;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 1;\r\n  max-width: 50%;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 0.5%;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 1px;\r\n  top: 0;\r\n  background-color: #fff;\r\n  padding: 1rem;\r\n  max-height: 100%;\r\n  scroll-behavior: auto;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.like-icon {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.pop-img {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 2% 2% 2% 2%;\r\n  background-color: rosybrown;\r\n}\r\n\r\n.img-pop {\r\n  max-height: 30rem;\r\n  width: 80%;\r\n  margin: 1% auto 0 auto;\r\n}\r\n\r\n.close {\r\n  width: 10%;\r\n  padding: 1% 2% 1% 2%;\r\n  background-color: rosybrown;\r\n  border: none;\r\n  align-self: flex-end;\r\n}\r\n\r\n.title-pop-div {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.title-pop {\r\n  flex: 1;\r\n  margin: 1% auto 0 auto;\r\n}\r\n\r\n.detail {\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-top: 4%;\r\n  width: 80%;\r\n}\r\n\r\n.datail-one {\r\n  flex: 1;\r\n  flex-direction: column;\r\n  min-width: 60%;\r\n  font-size: 1.1em;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin: 1% 0 0 4%;\r\n}\r\n\r\n.datail-two {\r\n  flex: 1;\r\n  flex-direction: column;\r\n  min-width: 40%;\r\n  font-size: 1.1em;\r\n  color: #000;\r\n  font-weight: 600;\r\n  margin: 1% 0 0 14%;\r\n}\r\n\r\n.overview {\r\n  font-size: 1.1em;\r\n  letter-spacing: 0.5px;\r\n  margin-top: 3%;\r\n  color: #000;\r\n  font-weight: 500;\r\n}\r\n\r\n.title-add {\r\n  text-align: center;\r\n  margin: 3% 0 2% 0;\r\n}\r\n\r\n.form {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\ninput {\r\n  padding: 2%;\r\n  max-width: 90%;\r\n  align-self: center;\r\n}\r\n\r\ntextarea {\r\n  margin-top: 3%;\r\n  max-width: 90%;\r\n  align-self: center;\r\n  padding: 1% 0 0 2%;\r\n}\r\n\r\n.submit {\r\n  margin-top: 3%;\r\n  padding: 2%;\r\n  max-width: 40%;\r\n  align-self: center;\r\n  border-radius: 50px;\r\n  font-size: 1.1em;\r\n  font-weight: 600;\r\n  background-color: #180c34;\r\n  color: #fff;\r\n}\r\n\r\n.user-comment {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.user-reservation {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\np {\r\n  line-height: 26px;\r\n}\r\n\r\nfooter {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #dbc7ea;\r\n  padding: 3% 1% 2% 1%;\r\n  justify-content: center;\r\n  text-align: center;\r\n  top: 230em;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 2rem;\r\n}\r\n',""]);const c=i},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var r="",t=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),t&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=n(e),t&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(n,r,t,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(t)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var l=0;l<n.length;l++){var d=[].concat(n[l]);t&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},81:n=>{n.exports=function(n){return n[1]}},379:n=>{var e=[];function r(n){for(var r=-1,t=0;t<e.length;t++)if(e[t].identifier===n){r=t;break}return r}function t(n,t){for(var a={},i=[],c=0;c<n.length;c++){var s=n[c],l=t.base?s[0]+t.base:s[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=r(u),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var f=o(m,t);t.byIndex=c,e.splice(c,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function o(n,e){var r=e.domAPI(e);return r.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;r.update(n=e)}else r.remove()}}n.exports=function(n,o){var a=t(n=n||[],o=o||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var c=r(a[i]);e[c].references--}for(var s=t(n,o),l=0;l<a.length;l++){var d=r(a[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=s}}},569:n=>{var e={};n.exports=function(n,r){var t=function(n){if(void 0===e[n]){var r=document.querySelector(n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[n]=r}return e[n]}(n);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(r)}},216:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},565:(n,e,r)=>{n.exports=function(n){var e=r.nc;e&&n.setAttribute("nonce",e)}},795:n=>{n.exports=function(n){var e=n.insertStyleElement(n);return{update:function(r){!function(n,e,r){var t="";r.supports&&(t+="@supports (".concat(r.supports,") {")),r.media&&(t+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(t+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),t+=r.css,o&&(t+="}"),r.media&&(t+="}"),r.supports&&(t+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(t,n,e.options)}(e,n,r)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},589:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function r(t){var o=e[t];if(void 0!==o)return o.exports;var a=e[t]={id:t,exports:{}};return n[t](a,a.exports,r),a.exports}r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{const n=n=>{const e=document.querySelector(".popu");return e.innerHTML=`<di class="pop-div">\n  <div class="pop-img">\n      <button type="button" class="close"><i class="fas fa-times fa-2x"></i></button>\n      <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="movies" class="img-pop">\n  </div>\n  <div class="title-pop-div">\n      <h2 class="title-pop">${n.title}</h2>\n      <div class="detail">\n          <div class="datail-one">   \n              <p class="lang">Original Language: ${n.original_language}</p>\n              <p class="date">Release date: ${n.release_date}</p>\n          </div>\n          <div class="datail-two">\n              <p class="lari">Popularity: ${n.popularity}</p>\n              <p class="elid">${n.id}</p>\n          </div>\n       </div>\n     </div>\n     <div class="overview">\n      ${n.overview}\n     </div>\n     <h3 class="title-add">Comments <span class="comment-counter"></span></h3>\n     <p class="error"></p>\n     <ul class="user-comment">\n      </ul>\n     <h3 class="title-add">Add a comment</h3>\n     <form class="form" method="post">\n          <input type="text" class="input" id="input"  placeholder="Your name" required>\n          <textarea class="texarea" id="comment" name="comment" cols="30" rows="7" placeholder="Your insights" required></textarea>\n          <button type="submit" class="submit">Comment</button>\n      </form>\n  </div>`,e},e=async n=>{try{const e=await fetch(`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/comments?item_id=${n}`);return await e.json()}catch{throw new Error("No comment found for this movie")}},t=async n=>{try{const e=await fetch(`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/reservations?item_id=${n}`);return await e.json()}catch{throw new Error("No comment found for this movie")}},o=()=>Number(document.querySelector(".user-comment").childElementCount),a=()=>Number(document.querySelector(".user-reservation").childElementCount);var i=r(379),c=r.n(i),s=r(795),l=r.n(s),d=r(569),u=r.n(d),p=r(565),m=r.n(p),f=r(216),h=r.n(f),v=r(589),g=r.n(v),y=r(426),b={};b.styleTagTransform=g(),b.setAttributes=m(),b.insert=u().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=h(),c()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;const x=document.querySelector(".movie-count"),w=async()=>{const n=await fetch("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=574dd9cb25756d0a612a187ad048b948"),e=await n.json();return await e.results};async function S(n){const e=await fetch(n),r=await e.json();return k(r),r}(async()=>{const r=await fetch("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=574dd9cb25756d0a612a187ad048b948"),i=await r.json(),c=await i.results;c.forEach((n=>{const{title:e,poster_path:r}=n;document.querySelector(".movie-block").innerHTML+=`<div class="cards">\n    <div class="img">\n        <img src="https://image.tmdb.org/t/p/w500${r}" alt="movies">\n    </div>\n    <div class="title-div">\n    <h2 class="title">${e}</h2>\n    <div class="like-icon">\n        <i class="far fa-heart fa-2x like"></i>\n        <span class="like-count"></span>\n    </div>\n    </div>\n    <div class="btn">\n        <button class="comment-btn" type="button">Comments</button>\n        <button class="reservation-btn" type="button">Reservations</button>\n    </div>\n</div>`})),w().then((r=>{r.forEach(((r,t)=>{document.querySelectorAll(".comment-btn")[t].addEventListener("click",(t=>{t.target.matches("button")&&(n(r),((n,e,r)=>{const t=n=>{const e=document.querySelector(".user-comment");n.forEach((n=>{const r=document.createElement("li"),t=`${n.creation_date}`;r.textContent=`${t}  ${n.username} : ${n.comment}`,e.appendChild(r)}))},o=document.querySelector(".popu");o.addEventListener("click",(e=>{if(e.target.matches("button")){e.preventDefault();const o=document.querySelector(".input").value,a=document.querySelector(".texarea").value,i=n.id,c=new Date,s={creation_date:`${c.getFullYear()}-${c.getMonth()+1}-${c.getDate()}`,username:o,comment:a};fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/comments",{method:"POST",body:JSON.stringify({item_id:i,username:o,comment:a}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((n=>{document.querySelector(".input").value="",document.querySelector(".texarea").value="",n.json(),(n=>{const e=document.querySelector(".user-comment"),r=document.createElement("li"),t=`${n.creation_date}`;r.textContent=`${t}  ${n.username} : ${n.comment}`,e.appendChild(r)})(s),document.querySelector(".comment-counter").innerHTML=`(${r()})`})).then((()=>{t(s),document.querySelector(".input").value="",document.querySelector(".texarea").value="",document.querySelector(".comment-counter").innerHTML=`(${r()})`}))}})),e(n.id).then((n=>{if(n.error)throw new Error(n.error);t(n),document.querySelector(".comment-counter").innerHTML=`(${n.length})`})),document.querySelector(".close").addEventListener("click",(()=>{o.innerHTML=""}))})(r,e,o))}))}))})),w().then((n=>{n.forEach(((n,e)=>{document.querySelectorAll(".reservation-btn")[e].addEventListener("click",(e=>{e.target.matches("button")&&((n=>{const e=document.querySelector(".r-popup");e.innerHTML=`<di class="pop-div">\n  <div class="pop-img">\n      <button type="button" class="close"><i class="fas fa-times fa-2x"></i></button>\n      <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="movies" class="img-pop">\n  </div>\n  <div class="title-pop-div">\n      <h2 class="title-pop">${n.title}</h2>\n      <div class="detail">\n          <div class="datail-one">   \n              <p class="lang">Original Language: ${n.original_language}</p>\n              <p class="date">Release date: ${n.release_date}</p>\n          </div>\n          <div class="datail-two">\n              <p class="lari">Popularity: ${n.popularity}</p>\n              <p class="elid">${n.id}</p>\n          </div>\n       </div>\n      </div>\n     <div class="overview">\n      ${n.overview}\n     </div>\n     <h3 class="title-add">Reservations <span class="reservation-counter"></span></h3>\n     <p class="error"></p>\n     <ul class="user-reservation">\n     </ul>\n     <h3 class="title-add">Add a reservation</h3>\n     <form class="form" method="post">\n          <input type="text" class="input-name" id="input"  placeholder="Your name" required>\n          <input type="date" class="start-date" id="input"  placeholder="Start date" required>\n          <input type="date" class="end-date" id="input"  placeholder="End date" required>\n          <button type="submit" class="submit">Reserve</button>\n      </form>\n  </div>`})(n),((n,e,r)=>{const t=n=>{const e=document.querySelector(".user-reservation");n.forEach((n=>{const r=document.createElement("li");r.textContent=`${n.date_start} - ${n.date_end} by ${n.username}`,e.appendChild(r)}))},o=document.querySelector(".r-popup");o.addEventListener("click",(e=>{if(e.target.matches("button")){e.preventDefault();const o=document.querySelector(".input-name").value,a=document.querySelector(".start-date").value,i=document.querySelector(".end-date").value,c=n.id,s={username:o,date_start:a,date_end:i};fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/reservations",{method:"POST",body:JSON.stringify({item_id:c,username:o,date_start:a,date_end:i}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((n=>(document.querySelector(".input-name").value="",n.json(),(n=>{const e=document.querySelector(".user-reservation"),r=document.createElement("li");r.textContent=`${n.date_start} - ${n.date_start} by ${n.username}`,e.appendChild(r)})(s),document.querySelector(".reservation-counter").innerHTML=`(${r()})`,n.json()))).then((()=>{t(s),document.querySelector(".input-name").value="",document.querySelector(".reservation-counter").innerHTML=`(${r()})`}))}})),e(n.id).then((n=>{if(n.error)throw new Error(n.error);t(n),document.querySelector(".reservation-counter").innerHTML=`(${n.length})`})),document.querySelector(".close").addEventListener("click",(()=>{o.innerHTML=""}))})(n,t,a))}))}))})),w().then((n=>{((n,e)=>{e.innerText=n.length})(n,x)}))})();const k=n=>{w().then((e=>{e.forEach(((e,r)=>{const t=document.querySelectorAll(".like-count")[r];n.forEach((n=>{n.item_id===e.id&&(t.innerHTML=`${n.likes} likes`)}))}))}))};S("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/likes"),w().then((n=>{n.forEach(((n,e)=>{document.querySelectorAll(".cards")[e].addEventListener("click",(e=>{"i"===e.target.tagName.toLowerCase()&&(!async function(n="",e={}){(await fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)})).json(),window.location.reload()}("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/likes",{item_id:n.id}),S("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/fVSALNrpnLiYk8wyVjPw/likes"))}))}))}))})()})();